# å‰è¨€
>æ–‡æœ¬å·²æ”¶å½•è‡³æˆ‘çš„GitHubä»“åº“ï¼Œæ¬¢è¿Starï¼šhttps://github.com/bin392328206/six-finger                             
> **ç§ä¸€æ£µæ ‘æœ€å¥½çš„æ—¶é—´æ˜¯åå¹´å‰ï¼Œå…¶æ¬¡æ˜¯ç°åœ¨**   
>æˆ‘çŸ¥é“å¾ˆå¤šäººä¸ç©**qq**äº†,ä½†æ˜¯æ€€æ—§ä¸€ä¸‹,æ¬¢è¿åŠ å…¥å…­è„‰ç¥å‰‘Javaèœé¸Ÿå­¦ä¹ ç¾¤ï¼Œç¾¤èŠå·ç ï¼š**549684836** é¼“åŠ±å¤§å®¶åœ¨æŠ€æœ¯çš„è·¯ä¸Šå†™åšå®¢

![](https://user-gold-cdn.xitu.io/2019/12/2/16ec5057ac2d21d6?w=640&h=459&f=jpeg&s=32759)

## çµ®å¨ 
> åŠæ­¥ç¥æ¸¸ï¼Œç¥æ¸¸ä¹‹ä¸‹ï¼Œå¤©ä¸‹æ— æ•Œã€‚ä¸€æ¢¦ä¸€æ¸¸ ä¾¿æ˜¯å¤©ä¸‹ã€‚         
> Rediså‰é¢å‡ ç¯‡çš„æ–‡ç« é“¾æ¥ï¼š  
>[ğŸ”¥ä»é›¶å¼€å§‹å­¦Redisä¹‹é‡‘åˆšå‡¡å¢ƒ](https://juejin.im/post/5dde62bf5188256ebc1ee256)   
>[ğŸ”¥ä»é›¶å¼€å§‹å­¦Redisä¹‹è‡ªåœ¨åœ°å¢ƒ](https://juejin.im/post/5de24ca25188255e8b76e1c4)      
>[ğŸ”¥ä»é›¶å¼€å§‹å­¦Redisä¹‹é€é¥å¤©å¢ƒ](https://juejin.im/post/5de391046fb9a0717220fafe)   
> ä¸Šä¸€ç¯‡çš„é€é¥å¤©å¢ƒ è®²çš„æ˜¯Redisçš„å†…å­˜æ·˜æ±°ç­–ç•¥ å’ŒæŒä¹…åŒ–æ–¹å¼ã€‚é‚£è¿™åŠæ­¥ç¥æ¸¸å°±æ˜¯å¸¦ä½ ä»¬é¨æ¸¸Redisçš„ä¸»ä»HAï¼Œå“¨å…µï¼Œå’ŒLuaè„šæœ¬

## Redisä¸»ä»å’Œå“¨å…µæ¨¡å¼

### Redis ä¸»ä»æ­å»ºï¼ˆæœ‰å…´è¶£çš„å°ä¼™ä¼´è‡ªå·±ç”¨è™šæ‹Ÿæœºæ­ä¸€ä¸ªç©ç©ï¼‰
> 1ã€ç¯å¢ƒè¯´æ˜   

|ä¸»æœºåç§°|IPåœ°å€	|redisç‰ˆæœ¬å’Œè§’è‰²è¯´æ˜|
|--|:--:|--:|
redis-master|192.168.56.11	|redis 5.0.3ï¼ˆä¸»ï¼‰
redis-slave01	|192.168.56.12	|redis 5.0.3ï¼ˆä»ï¼‰
redis-slave02	|192.168.56.13	|redis 5.0.3ï¼ˆä»ï¼‰

> 2ã€ä¿®æ”¹ä¸»ä»çš„redisé…ç½®æ–‡ä»¶

```
[root@redis-master ~]# grep -Ev "^$|#" /usr/local/redis/redis.conf 
bind 192.168.56.11
protected-mode yes
port 6379
daemonize yes
pidfile /var/run/redis_6379.pid
logfile "/var/log/redis.log"
dir /var/redis/

[root@redis-slave01 ~]# grep -Ev "^$|#" /usr/local/redis/redis.conf
bind 192.168.56.12
protected-mode yes
port 6379
daemonize yes
pidfile /var/run/redis_6379.pid
logfile "/var/log/redis.log"
dir /var/redis/
replicaof 192.168.56.11 6379    #é…ç½®ä¸ºmasterçš„ä»ï¼Œå¦‚æœmasterä¸Šæœ‰å¯†ç é…ç½®ï¼Œè¿˜éœ€è¦å¢åŠ ä¸‹é¢ä¸€é¡¹å¯†ç é…ç½®
masterauth 123456   #é…ç½®ä¸»çš„å¯†ç 

[root@redis-slave02 ~]# grep -Ev "^$|#" /usr/local/redis/redis.conf
bind 192.168.56.13
protected-mode yes
port 6379
daemonize yes
pidfile /var/run/redis_6379.pid
logfile "/var/log/redis.log"
dir /var/redis/
replicaof 192.168.56.11 6379    #é…ç½®ä¸ºmasterçš„ä»
masterauth 123456   #é…ç½®ä¸»çš„å¯†ç 
```
> 3ã€å¯åŠ¨ä¸»ä»redis
è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šredisä¸»ä»å’Œmysqlä¸»ä»ä¸ä¸€æ ·ï¼Œredisä¸»ä»ä¸ç”¨äº‹å…ˆåŒæ­¥æ•°æ®ï¼Œå®ƒä¼šè‡ªåŠ¨åŒæ­¥è¿‡å»

```
[root@redis-master ~]# systemctl start redis
[root@redis-slave01 ~]# systemctl start redis
[root@redis-slave02 ~]# systemctl start redis
[root@redis-master ~]# netstat -tulnp |grep redis
tcp        0      0 192.168.56.11:6379      0.0.0.0:*               LISTEN      1295/redis-server 1 
[root@redis-slave01 ~]# netstat -tulnp |grep redis
tcp        0      0 192.168.56.12:6379      0.0.0.0:*               LISTEN      1625/redis-server 1 
[root@redis-slave02 ~]# netstat -tulnp |grep redis
tcp        0      0 192.168.56.13:6379      0.0.0.0:*               LISTEN      1628/redis-server 1 
```
> 4ã€æ•°æ®åŒæ­¥éªŒè¯

```
[root@redis-master ~]# redis-cli -h 192.168.56.11   #ä¸»ä¸Šå†™å…¥æ•°æ®
192.168.56.11:6379> KEYS *
(empty list or set)
192.168.56.11:6379> set k1 123
OK
192.168.56.11:6379> set k2 456
OK

[root@redis-slave01 ~]# redis-cli -h 192.168.56.12  #slave01ä¸ŠæŸ¥çœ‹æ˜¯å¦æ•°æ®åŒæ­¥
192.168.56.12:6379> KEYS *
1) "k2"
2) "k1"
192.168.56.12:6379> get k1
"123"
192.168.56.12:6379> get k2
"456"

[root@redis-slave02 ~]# redis-cli -h 192.168.56.13  #slave02ä¸ŠæŸ¥çœ‹æ˜¯å¦æ•°æ®åŒæ­¥
192.168.56.13:6379> KEYS *
1) "k2"
2) "k1"
192.168.56.13:6379> get k1
"123"
192.168.56.13:6379> get k2
"456"
```

### ä¸»ä»æ¶æ„
ä¸»ä»æ¶æ„çš„ç‰¹ç‚¹
- ä¸»æœåŠ¡å™¨è´Ÿè´£æ¥æ”¶å†™è¯·æ±‚
- ä»æœåŠ¡å™¨è´Ÿè´£æ¥æ”¶è¯»è¯·æ±‚
- ä»æœåŠ¡å™¨çš„æ•°æ®ç”±ä¸»æœåŠ¡å™¨å¤åˆ¶è¿‡å»ã€‚ä¸»ä»æœåŠ¡å™¨çš„æ•°æ®æ˜¯ä¸€è‡´çš„

ä¸»ä»æ¶æ„çš„å¥½å¤„
- è¯»å†™åˆ†ç¦»(ä¸»æœåŠ¡å™¨è´Ÿè´£å†™ï¼Œä»æœåŠ¡å™¨è´Ÿè´£è¯»)
- é«˜å¯ç”¨(æŸä¸€å°ä»æœåŠ¡å™¨æŒ‚äº†ï¼Œå…¶ä»–ä»æœåŠ¡å™¨è¿˜èƒ½ç»§ç»­æ¥æ”¶è¯·æ±‚ï¼Œä¸å½±å“æœåŠ¡)
- å¤„ç†æ›´å¤šçš„å¹¶å‘é‡(æ¯å°ä»æœåŠ¡å™¨éƒ½å¯ä»¥æ¥æ”¶è¯»è¯·æ±‚ï¼Œè¯»QPSå°±ä¸Šå»äº†)

ä¸»ä»åŒæ­¥
> ä¸»ä»æ¶æ„çš„ç‰¹ç‚¹ä¹‹ä¸€ï¼šä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨çš„æ•°æ®æ˜¯ä¸€è‡´çš„ã€‚   
> ä¸»ä»åŒæ­¥çš„2ç§æƒ…å†µ

- åŒæ­¥(sync)
    - å°†ä»æœåŠ¡å™¨çš„æ•°æ®åº“çŠ¶æ€æ›´æ–°è‡³ä¸»æœåŠ¡å™¨çš„æ•°æ®åº“çŠ¶æ€
- å‘½ä»¤ä¼ æ’­(command propagate)
    - ä¸»æœåŠ¡å™¨çš„æ•°æ®åº“çŠ¶æ€è¢«ä¿®æ”¹ï¼Œå¯¼è‡´ä¸»ä»æœåŠ¡å™¨çš„æ•°æ®åº“çŠ¶æ€ä¸ä¸€è‡´ï¼Œè®©ä¸»ä»æœåŠ¡å™¨çš„æ•°æ®åº“çŠ¶æ€é‡æ–°å›åˆ°ä¸€è‡´çŠ¶æ€ã€‚
> å®Œæ•´çš„åŒæ­¥
- ä»æœåŠ¡å™¨å‘ä¸»æœåŠ¡å™¨å‘é€PSYNCå‘½ä»¤
- æ”¶åˆ°PSYNCå‘½ä»¤çš„ä¸»æœåŠ¡å™¨æ‰§è¡ŒBGSAVEå‘½ä»¤ï¼Œåœ¨åå°ç”Ÿæˆä¸€ä¸ªRDBæ–‡ä»¶ã€‚å¹¶ç”¨ä¸€ä¸ªç¼“å†²åŒºæ¥è®°å½•ä»ç°åœ¨å¼€å§‹æ‰§è¡Œçš„æ‰€æœ‰å†™å‘½ä»¤ã€‚
- å½“ä¸»æœåŠ¡å™¨çš„BGSAVEå‘½ä»¤æ‰§è¡Œå®Œåï¼Œå°†ç”Ÿæˆçš„RDBæ–‡ä»¶å‘é€ç»™ä»æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨æ¥æ”¶å’Œè½½å…¥RBDæ–‡ä»¶ã€‚å°†è‡ªå·±çš„æ•°æ®åº“çŠ¶æ€æ›´æ–°è‡³ä¸ä¸»æœåŠ¡å™¨æ‰§è¡ŒBGSAVEå‘½ä»¤æ—¶çš„çŠ¶æ€ã€‚
- ä¸»æœåŠ¡å™¨å°†æ‰€æœ‰ç¼“å†²åŒºçš„å†™å‘½ä»¤å‘é€ç»™ä»æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨æ‰§è¡Œè¿™äº›å†™å‘½ä»¤ï¼Œè¾¾åˆ°æ•°æ®æœ€ç»ˆä¸€è‡´æ€§ã€‚

> éƒ¨åˆ†é‡åŒæ­¥
- ä¸»ä»æœåŠ¡å™¨çš„å¤åˆ¶åç§»é‡ ä¸»æœåŠ¡å™¨æ¯æ¬¡ä¼ æ’­Nä¸ªå­—èŠ‚ï¼Œå°±å°†è‡ªå·±çš„å¤åˆ¶åç§»é‡åŠ ä¸ŠN
- ä»æœåŠ¡å™¨æ¯æ¬¡æ”¶åˆ°ä¸»æœåŠ¡å™¨çš„Nä¸ªå­—èŠ‚ï¼Œå°±å°†è‡ªå·±çš„å¤åˆ¶åç§»é‡åŠ ä¸ŠN
- é€šè¿‡å¯¹æ¯”ä¸»ä»å¤åˆ¶çš„åç§»é‡ï¼Œå°±å¾ˆå®¹æ˜“çŸ¥é“ä¸»ä»æœåŠ¡å™¨çš„æ•°æ®æ˜¯å¦å¤„äºä¸€è‡´æ€§çš„çŠ¶æ€ï¼

### Redis HA æ–¹æ¡ˆ
> HA(High Availableï¼Œé«˜å¯ç”¨æ€§ç¾¤é›†)æœºé›†ç¾¤ç³»ç»Ÿç®€ç§°ï¼Œæ˜¯ä¿è¯ä¸šåŠ¡è¿ç»­æ€§çš„æœ‰æ•ˆè§£å†³æ–¹æ¡ˆï¼Œä¸€èˆ¬æœ‰ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„èŠ‚ç‚¹ï¼Œä¸”åˆ†ä¸ºæ´»åŠ¨èŠ‚ç‚¹åŠå¤‡ç”¨èŠ‚ç‚¹ã€‚é€šå¸¸æŠŠæ­£åœ¨æ‰§ è¡Œä¸šåŠ¡çš„ç§°ä¸ºæ´»åŠ¨èŠ‚ç‚¹ï¼Œè€Œä½œä¸ºæ´»åŠ¨èŠ‚ç‚¹çš„ä¸€ä¸ªå¤‡ä»½çš„åˆ™ç§°ä¸ºå¤‡ç”¨èŠ‚ç‚¹ã€‚å½“æ´»åŠ¨èŠ‚ç‚¹å‡ºç°é—®é¢˜ï¼Œå¯¼è‡´æ­£åœ¨è¿è¡Œçš„ä¸šåŠ¡ï¼ˆä»»åŠ¡ï¼‰ä¸èƒ½æ­£å¸¸è¿è¡Œæ—¶ï¼Œå¤‡ç”¨èŠ‚ç‚¹æ­¤æ—¶å°±ä¼šä¾¦æµ‹åˆ°ï¼Œå¹¶ç«‹å³æ¥ç»­æ´»åŠ¨èŠ‚ç‚¹æ¥æ‰§è¡Œä¸šåŠ¡ã€‚ä»è€Œå®ç°ä¸šåŠ¡çš„ä¸ä¸­æ–­æˆ–çŸ­æš‚ä¸­æ–­ã€‚

> Redis ä¸€èˆ¬ä»¥ä¸»/ä»æ–¹å¼éƒ¨ç½²ï¼ˆè¿™é‡Œè®¨è®ºçš„åº”ç”¨ä»å®ä¾‹ä¸»è¦ç”¨äºå¤‡ä»½ï¼Œä¸»å®ä¾‹æä¾›è¯»å†™ï¼‰è¯¥æ–¹å¼è¦å®ç° HA ä¸»è¦æœ‰å¦‚ä¸‹å‡ ç§æ–¹æ¡ˆï¼š
- keepalivedï¼š é€šè¿‡ keepalived çš„è™šæ‹Ÿ IPï¼Œæä¾›ä¸»ä»çš„ç»Ÿä¸€è®¿é—®ï¼Œåœ¨ä¸»å‡ºç°é—®é¢˜æ—¶ï¼Œ é€šè¿‡ keepalived è¿è¡Œè„šæœ¬å°†ä»æå‡ä¸ºä¸»ï¼Œå¾…ä¸»æ¢å¤åå…ˆåŒæ­¥åè‡ªåŠ¨å˜ä¸ºä¸»ï¼Œè¯¥æ–¹æ¡ˆçš„å¥½å¤„æ˜¯ä¸»ä»åˆ‡æ¢åï¼Œåº”ç”¨ç¨‹åºä¸éœ€è¦çŸ¥é“(å› ä¸ºè®¿é—®çš„è™šæ‹Ÿ IP ä¸å˜)ï¼Œåå¤„æ˜¯å¼•å…¥ keepalived å¢åŠ éƒ¨ç½²å¤æ‚æ€§ï¼Œåœ¨æœ‰äº›æƒ…å†µä¸‹ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±
- zookeeperï¼š é€šè¿‡ zookeeper æ¥ç›‘æ§ä¸»ä»å®ä¾‹ï¼Œ ç»´æŠ¤æœ€æ–°æœ‰æ•ˆçš„ IPï¼Œ åº”ç”¨é€šè¿‡ zookeeper å–å¾— IPï¼Œå¯¹ Redis è¿›è¡Œè®¿é—®ï¼Œè¯¥æ–¹æ¡ˆéœ€è¦ç¼–å†™å¤§é‡çš„ç›‘æ§ä»£ç 
- sentinelï¼š é€šè¿‡ Sentinel ç›‘æ§ä¸»ä»å®ä¾‹ï¼Œè‡ªåŠ¨è¿›è¡Œæ•…éšœæ¢å¤ï¼Œè¯¥æ–¹æ¡ˆæœ‰ä¸ªç¼ºé™·ï¼šå› ä¸ºä¸»ä»å®ä¾‹åœ°å€( IP & PORT )æ˜¯ä¸åŒçš„ï¼Œå½“æ•…éšœå‘ç”Ÿè¿›è¡Œä¸»ä»åˆ‡æ¢åï¼Œåº”ç”¨ç¨‹åºæ— æ³•çŸ¥é“æ–°åœ°å€ï¼Œæ•…åœ¨ Jedis2.2.2 ä¸­æ–°å¢äº†å¯¹ Sentinel çš„æ”¯æŒï¼Œåº”ç”¨é€šè¿‡ redis.clients.jedis.JedisSentinelPool.getResource() å–å¾—çš„ Jedis å®ä¾‹ä¼šåŠæ—¶æ›´æ–°åˆ°æ–°çš„ä¸»å®ä¾‹åœ°å€


### Redis Sentinel
Redis Sentinelæ˜¯å®˜æ–¹æ¨èçš„é«˜å¯ç”¨æ€§è§£å†³æ–¹æ¡ˆã€‚Sentinelæ˜¯ä¸€ä¸ªç®¡ç†å¤šä¸ªRediså®ä¾‹çš„å·¥å…·ï¼Œå®ƒå¯ä»¥å®ç°å¯¹Redisçš„ç›‘æ§ã€é€šçŸ¥ã€è‡ªåŠ¨æ•…éšœè½¬ç§»ã€‚

Sentinelçš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ä¸»èŠ‚ç‚¹å­˜æ´»æ£€æµ‹ã€ä¸»ä»è¿è¡Œæƒ…å†µæ£€æµ‹ã€è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼ˆfailoverï¼‰ã€ä¸»ä»åˆ‡æ¢ã€‚Redisçš„Sentinelæœ€å°é…ç½®æ˜¯ä¸€ä¸»ä¸€ä»ã€‚ Redisçš„Sentinelç³»ç»Ÿå¯ä»¥ç”¨æ¥ç®¡ç†å¤šä¸ªRedisæœåŠ¡å™¨ï¼Œè¯¥ç³»ç»Ÿå¯ä»¥æ‰§è¡Œä»¥ä¸‹å››ä¸ªä»»åŠ¡ï¼š
- ç›‘æ§: Sentinelä¼šä¸æ–­çš„æ£€æŸ¥ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚
- é€šçŸ¥: å½“è¢«ç›‘æ§çš„æŸä¸ªRedisæœåŠ¡å™¨å‡ºç°é—®é¢˜ï¼ŒSentinelé€šè¿‡APIè„šæœ¬å‘ç®¡ç†å‘˜æˆ–è€…å…¶ä»–çš„åº”ç”¨ç¨‹åºå‘é€é€šçŸ¥ã€‚
- è‡ªåŠ¨æ•…éšœè½¬ç§»: å½“ä¸»èŠ‚ç‚¹ä¸èƒ½æ­£å¸¸å·¥ä½œæ—¶ï¼ŒSentinelä¼šå¼€å§‹ä¸€æ¬¡è‡ªåŠ¨çš„æ•…éšœè½¬ç§»æ“ä½œï¼Œå®ƒä¼šå°†ä¸å¤±æ•ˆä¸»èŠ‚ç‚¹æ˜¯ä¸»ä»å…³ç³»çš„å…¶ä¸­ä¸€ä¸ªä»èŠ‚ç‚¹å‡çº§ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹ï¼Œ å¹¶ä¸”å°†å…¶ä»–çš„ä»èŠ‚ç‚¹æŒ‡å‘æ–°çš„ä¸»èŠ‚ç‚¹ã€‚
- é…ç½®æä¾›è€…: åœ¨Redis Sentinelæ¨¡å¼ä¸‹ï¼Œå®¢æˆ·ç«¯åº”ç”¨åœ¨åˆå§‹åŒ–æ—¶è¿æ¥çš„æ˜¯SentinelèŠ‚ç‚¹é›†åˆï¼Œä»ä¸­è·å–ä¸»èŠ‚ç‚¹çš„ä¿¡æ¯ã€‚

### Redis Sentinelçš„å·¥ä½œæµç¨‹

![](https://user-gold-cdn.xitu.io/2019/12/2/16ec565266f116fa?w=660&h=266&f=jpeg&s=68734)

![](https://user-gold-cdn.xitu.io/2019/12/2/16ec565db3415ae9?w=551&h=391&f=png&s=75556)

å¦‚å›¾æ‰€ç¤ºï¼šç”±ä¸€ä¸ªæˆ–å¤šä¸ªSentinelå®ä¾‹ç»„æˆçš„Sentinelç³»ç»Ÿå¯ä»¥ç›‘è§†ä»»æ„å¤šä¸ªä¸»æœåŠ¡å™¨ï¼Œä»¥åŠæ‰€æœ‰ä»æœåŠ¡å™¨ï¼Œå¹¶åœ¨è¢«ç›‘è§†çš„ä¸»æœåŠ¡å™¨è¿›å…¥ä¸‹çº¿çŠ¶æ€æ—¶ï¼Œè‡ªåŠ¨å°†ä¸‹çº¿ä¸»æœåŠ¡å™¨å±ä¸‹çš„æŸä¸ªä»æœåŠ¡å™¨å‡çº§ä¸ºæ–°çš„ä¸»æœåŠ¡å™¨ï¼Œç„¶åç”±æ–°çš„ä¸»æœåŠ¡å™¨ä»£æ›¿å·²ä¸‹çº¿çš„ä¸»æœåŠ¡å™¨ç»§ç»­å¤„ç†å‘½ä»¤è¯·æ±‚ 

Sentinelè´Ÿè´£ç›‘æ§é›†ç¾¤ä¸­çš„æ‰€æœ‰ä¸»ã€ä»Redisï¼Œå½“å‘ç°ä¸»æ•…éšœæ—¶ï¼ŒSentinelä¼šåœ¨æ‰€æœ‰çš„ä»ä¸­é€‰ä¸€ä¸ªæˆä¸ºæ–°çš„ä¸»ã€‚å¹¶ä¸”ä¼šæŠŠå…¶ä½™çš„ä»å˜ä¸ºæ–°ä¸»çš„ä»ã€‚åŒæ—¶é‚£å°æœ‰é—®é¢˜çš„æ—§ä¸»ä¹Ÿä¼šå˜ä¸ºæ–°ä¸»çš„ä»ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æ—§çš„ä¸»å³ä½¿æ¢å¤æ—¶ï¼Œå¹¶ä¸ä¼šæ¢å¤åŸæ¥çš„ä¸»èº«ä»½ï¼Œè€Œæ˜¯ä½œä¸ºæ–°ä¸»çš„ä¸€ä¸ªä»ã€‚

åœ¨Redisé«˜å¯ç”¨æ¶æ„ä¸­ï¼ŒSentinelå¾€å¾€ä¸æ˜¯åªæœ‰ä¸€ä¸ªï¼Œè€Œæ˜¯æœ‰3ä¸ªæˆ–è€…ä»¥ä¸Šã€‚ç›®çš„æ˜¯ä¸ºäº†è®©å…¶æ›´åŠ å¯é ï¼Œæ¯•ç«Ÿä¸»å’Œä»åˆ‡æ¢è§’è‰²è¿™ä¸ªè¿‡ç¨‹è¿˜æ˜¯è›®å¤æ‚çš„ã€‚è¿™ä¸ªæ˜¯æ‰€æœ‰åˆ†å¸ƒå¼ç³»ç»Ÿéƒ½è¦ç¢°åˆ°çš„é—®é¢˜ä¸€ä¸ªæ˜¯å´©æºƒæ¢å¤ ä¸€ä¸ªæ˜¯æ•°æ®åŒæ­¥ ä¸‹é¢æˆ‘ä»¬å°±æ¥èŠèŠ

### Redis HAæ–¹æ¡ˆçš„ å´©æºƒæ¢å¤ å’Œæ•°æ®åŒæ­¥
#### å´©æºƒæ¢å¤
> è¿™ä¸ªæ˜¯æ‰€æœ‰åˆ†å¸ƒå¼ç³»ç»Ÿçš„é—®é¢˜ ä»€ä¹ˆå°±æ˜¯å´©æºƒæ¢å¤å‘¢ å°±æˆ‘ä»¬ç›®å‰çš„æ–¹æ¡ˆæ¥è¯´ æˆ‘ä»¬æ˜¯ç”¨sentinel æ¥ä¿è¯redisçš„é«˜å¯ç”¨ åŒæ—¶ sentinel æœ¬èº«è‡ªå·±ä¹Ÿåšäº†HA å‡è®¾ä¸€ä¸»ä¿©ä»çš„æƒ…å†µä¸‹ å¦‚æœä¸»èŠ‚ç‚¹æŒ‚äº† æ€ä¹ˆåŠï¼Œè¿™å°±èƒ½é€ æˆå•ç‚¹æ•…éšœ è®©æ•´ä¸ªredis é›†ç¾¤ä¸å¯ç”¨ï¼Œæ‰€ä»¥ å´©æºƒæ¢å¤å°±æ˜¯ç±»ä¼¼äºä¸€ä¸ªZookeeperçš„ZAB ç®—æ³• ä»å…¶ä»–èŠ‚ç‚¹ä¸­é€‰ä¸¾ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼Œå…·ä½“æ€ä¹ˆé€‰ä¸¾ä¸€ä¸ªæ–°çš„ä¸»èŠ‚ç‚¹,è¿™è¾¹å°±ä¸æ‰©å±•äº†ï¼Œå†è¯´ä¸‹å»ï¼Œè¿™ç¯‡å°±æ‰¯ä¸å®Œäº†ã€‚
#### æ•°æ®åŒæ­¥

> redisçš„ä¸»ä»å¤åˆ¶  
    >ä¾èµ–äºredisä¾èµ–äºRDBæ¨¡å¼ä¸‹çš„æŒä¹…åŒ–å­˜å‚¨ï¼›é‡‡ç”¨å¤åˆ¶RDBæ–‡ä»¶çš„å½¢å¼è¿›è¡Œä¸»ä»èŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®åŒæ­¥     
    >æ³¨æ„ï¼š  ä¸»ä»å¤åˆ¶æ—¶ä¸è¦å¼€å¯AOFæŒä¹…åŒ–æ¨¡å¼ï¼Œå› ä¸ºAOFä¼˜å…ˆçº§é«˜äºRDBæ¨¡å¼   
    
> RDBæ–‡ä»¶ä¸¤ç§ä¼ è¾“æ–¹æ³•   
    1.æ™®é€šå¤åˆ¶    
 å°†ä¸»èŠ‚ç‚¹å·²ç»åˆ°ç£ç›˜ä¸Šçš„çš„ROBæ–‡ä»¶ï¼Œå¤åˆ¶åˆ°ä»èŠ‚ç‚¹ä¸Š    
    2.æ— ç›˜å¤åˆ¶    
   masterç«¯ç›´æ¥å°†RDB fileä¼ åˆ°slave socketï¼Œä¸éœ€è¦ä¸diskè¿›è¡Œäº¤äº’    
   æ— ç£ç›˜disklessæ–¹å¼é€‚åˆç£ç›˜è¯»å†™é€Ÿåº¦æ…¢ä½†ç½‘ç»œå¸¦å®½éå¸¸é«˜çš„ç¯å¢ƒ   
##  Redis Sentinel æ­å»ºï¼ˆå¯ä»¥è‡ªå·±è¯•è¯•ï¼‰
1.ç¯å¢ƒè¯´æ˜

|ä¸»æœºåç§°|IPåœ°å€	|redisç‰ˆæœ¬å’Œè§’è‰²è¯´æ˜|
|--|:--:|:--|
redis-master|192.168.56.11:6379	|redis 5.0.3ï¼ˆä¸»ï¼‰
redis-slave01	|192.168.56.12:6379	|redis 5.0.3ï¼ˆä»ï¼‰
redis-slave02	|192.168.56.13:6379	|redis 5.0.3ï¼ˆä»ï¼‰
redis-master|192.168.56.11:26379	|Sentinel01(ä¸»)
redis-slave01	|192.168.56.12:26379	|Sentinel02(ä»)
redis-slave02	|192.168.56.13:26379	|Sentinel03(ä»)


2.éƒ¨ç½²Sentinel

```
# ç«¯å£
port 26379

# æ˜¯å¦åå°å¯åŠ¨
daemonize yes

# pidæ–‡ä»¶è·¯å¾„
pidfile /var/run/redis-sentinel.pid

# æ—¥å¿—æ–‡ä»¶è·¯å¾„
logfile "/var/log/sentinel.log"

# å®šä¹‰å·¥ä½œç›®å½•
dir /tmp

# å®šä¹‰Redisä¸»çš„åˆ«å, IP, ç«¯å£ï¼Œè¿™é‡Œçš„2æŒ‡çš„æ˜¯éœ€è¦è‡³å°‘2ä¸ªSentinelè®¤ä¸ºä¸»RedisæŒ‚äº†æ‰æœ€ç»ˆä¼šé‡‡å–ä¸‹ä¸€æ­¥è¡Œä¸º
sentinel monitor mymaster 127.0.0.1 6379 2

# å¦‚æœmymaster 30ç§’å†…æ²¡æœ‰å“åº”ï¼Œåˆ™è®¤ä¸ºå…¶ä¸»è§‚å¤±æ•ˆ
sentinel down-after-milliseconds mymaster 30000

# å¦‚æœmasteré‡æ–°é€‰å‡ºæ¥åï¼Œå…¶å®ƒslaveèŠ‚ç‚¹èƒ½åŒæ—¶å¹¶è¡Œä»æ–°masteråŒæ­¥æ•°æ®çš„å°æ•°æœ‰å¤šå°‘ä¸ªï¼Œæ˜¾ç„¶è¯¥å€¼è¶Šå¤§ï¼Œæ‰€æœ‰slaveèŠ‚ç‚¹å®ŒæˆåŒæ­¥åˆ‡æ¢çš„æ•´ä½“é€Ÿåº¦è¶Šå¿«ï¼Œä½†å¦‚æœæ­¤æ—¶æ­£å¥½æœ‰äººåœ¨è®¿é—®è¿™äº›slaveï¼Œå¯èƒ½é€ æˆè¯»å–å¤±è´¥ï¼Œå½±å“é¢ä¼šæ›´å¹¿ã€‚æœ€ä¿å®ˆçš„è®¾ç½®ä¸º1ï¼ŒåŒä¸€æ—¶é—´ï¼Œåªèƒ½æœ‰ä¸€å°å¹²è¿™ä»¶äº‹ï¼Œè¿™æ ·å…¶å®ƒslaveè¿˜èƒ½ç»§ç»­æœåŠ¡ï¼Œä½†æ˜¯æ‰€æœ‰slaveå…¨éƒ¨å®Œæˆç¼“å­˜æ›´æ–°åŒæ­¥çš„è¿›ç¨‹å°†å˜æ…¢ã€‚
sentinel parallel-syncs mymaster 1

# è¯¥å‚æ•°æŒ‡å®šä¸€ä¸ªæ—¶é—´æ®µï¼Œåœ¨è¯¥æ—¶é—´æ®µå†…æ²¡æœ‰å®ç°æ•…éšœè½¬ç§»æˆåŠŸï¼Œåˆ™ä¼šå†ä¸€æ¬¡å‘èµ·æ•…éšœè½¬ç§»çš„æ“ä½œï¼Œå•ä½æ¯«ç§’
sentinel failover-timeout mymaster 180000

# ä¸å…è®¸ä½¿ç”¨SENTINEL SETè®¾ç½®notification-scriptå’Œclient-reconfig-scriptã€‚
sentinel deny-scripts-reconfig yes
```
ä¿®æ”¹ä¸‰å°Sentinelçš„é…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹

```
[root@redis-master ~]# grep -Ev "^$|#" /usr/local/redis/sentinel.conf 
port 26379
daemonize yes
pidfile "/var/run/redis-sentinel.pid"
logfile "/var/log/sentinel.log"
dir "/tmp"
sentinel monitor mymaster 192.168.56.11 6379 2
sentinel down-after-milliseconds mymaster 30000
sentinel parallel-syncs mymaster 1
sentinel failover-timeout mymaster 180000
sentinel deny-scripts-reconfig yes

[root@redis-slave01 ~]# grep -Ev "^$|#" /usr/local/redis/sentinel.conf 
port 26379
daemonize yes
pidfile "/var/run/redis-sentinel.pid"
logfile "/var/log/sentinel.log"
dir "/tmp"
sentinel monitor mymaster 192.168.56.11 6379 2
sentinel down-after-milliseconds mymaster 30000
sentinel parallel-syncs mymaster 1
sentinel failover-timeout mymaster 180000
sentinel deny-scripts-reconfig yes

[root@redis-slave02 ~]# grep -Ev "^$|#" /usr/local/redis/sentinel.conf 
port 26379
daemonize yes
pidfile "/var/run/redis-sentinel.pid"
logfile "/var/log/sentinel.log"
dir "/tmp"
sentinel monitor mymaster 192.168.56.11 6379 2
sentinel down-after-milliseconds mymaster 30000
sentinel parallel-syncs mymaster 1
sentinel failover-timeout mymaster 180000
sentinel deny-scripts-reconfig yes
```
3.å¯åŠ¨Sentinel
å¯åŠ¨çš„é¡ºåºï¼šä¸»Redis --> ä»Redis --> Sentinel1/2/3

```
[root@redis-master ~]# redis-sentinel /usr/local/redis/sentinel.conf 
[root@redis-master ~]# ps -ef |grep redis
root      1295     1  0 14:03 ?        00:00:06 /usr/local/redis/src/redis-server 192.168.56.11:6379
root      1407     1  1 14:40 ?        00:00:00 redis-sentinel *:26379 [sentinel]
root      1412  1200  0 14:40 pts/1    00:00:00 grep --color=auto redis

[root@redis-slave01 ~]# redis-sentinel /usr/local/redis/sentinel.conf 
[root@redis-slave01 ~]# ps -ef |grep redis
root      1625     1  0 14:04 ?        00:00:06 /usr/local/redis/src/redis-server 192.168.56.12:6379
root      1715     1  1 14:41 ?        00:00:00 redis-sentinel *:26379 [sentinel]
root      1720  1574  0 14:41 pts/0    00:00:00 grep --color=auto redis

[root@redis-slave02 ~]# redis-sentinel /usr/local/redis/sentinel.conf 
[root@redis-slave02 ~]# ps -ef |grep redis
root      1628     1  0 14:07 ?        00:00:06 /usr/local/redis/src/redis-server 192.168.56.13:6379
root      1709     1  0 14:42 ?        00:00:00 redis-sentinel *:26379 [sentinel]
root      1714  1575  0 14:42 pts/0    00:00:00 grep --color=auto redis
```
4.Sentinelæ“ä½œ

```
[root@redis-master ~]# redis-cli -p 26379   #å“¨å…µæ¨¡å¼æŸ¥çœ‹
127.0.0.1:26379> sentinel master mymaster   #è¾“å‡ºè¢«ç›‘æ§çš„ä¸»èŠ‚ç‚¹çš„çŠ¶æ€ä¿¡æ¯
 1) "name"
 2) "mymaster"
 3) "ip"
 4) "192.168.56.11"
 5) "port"
 6) "6379"
 7) "runid"
 8) "bae06cc3bc6dcbff7c2de1510df7faf1a6eb6941"
 9) "flags"
10) "master"
......
127.0.0.1:26379> sentinel slaves mymaster   #æŸ¥çœ‹mymasterçš„ä»ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°æœ‰2ä¸ªä»èŠ‚ç‚¹
1)  1) "name"
    2) "192.168.56.12:6379"
    3) "ip"
    4) "192.168.56.12"
    5) "port"
    6) "6379"
    7) "runid"
    8) "c86027e7bdd217cb584b1bd7a6fea4ba79cf6364"
    9) "flags"
   10) "slave"
......
2)  1) "name"
    2) "192.168.56.13:6379"
    3) "ip"
    4) "192.168.56.13"
    5) "port"
    6) "6379"
    7) "runid"
    8) "61597fdb615ecf8bd7fc18e143112401ed6156ec"
    9) "flags"
   10) "slave"
......

127.0.0.1:26379> sentinel sentinels mymaster    #æŸ¥çœ‹å…¶å®ƒsentinelä¿¡æ¯
1)  1) "name"
    2) "ba12e2a4023d2e9bcad282395ba6b14030920070"
    3) "ip"
    4) "192.168.56.12"
    5) "port"
    6) "26379"
    7) "runid"
    8) "ba12e2a4023d2e9bcad282395ba6b14030920070"
    9) "flags"
   10) "sentinel"
......
2)  1) "name"
    2) "14fca3f851e9e1bd3a4a0dc8a9e34bb237648455"
    3) "ip"
    4) "192.168.56.13"
    5) "port"
    6) "26379"
    7) "runid"
    8) "14fca3f851e9e1bd3a4a0dc8a9e34bb237648455"
    9) "flags"
   10) "sentinel"
```

## Redis Lua è„šæœ¬
> å†è¿™é‡Œæˆ‘æƒ³è¯´ä¸‹ï¼Œä¸ºå•¥æˆ‘ä»¬è¦ç”¨Luaè„šæœ¬å‘¢ï¼Ÿ Luaè„šæœ¬çš„å¥½å¤„   
> rediså¯¹luaè„šæœ¬çš„è°ƒç”¨æ˜¯åŸå­æ€§çš„ï¼Œæ‰€ä»¥ä¸€äº›ç‰¹æ®Šåœºæ™¯ï¼Œæ¯”å¦‚åƒå®ç°åˆ†å¸ƒå¼é”ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾åœ¨luaä¸­å®ç°  
> ä¸‹é¢æˆ‘å¸¦å¤§å®¶æ­å»ºä¸€ä¸ªæœ€ç®€å•luaè„šæœ¬demo
- æ·»åŠ ä¾èµ–

```
<dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-data-redis</artifactId>
    </dependency>
    <dependency>
         <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
    </dependency>
```
- ç¼–å†™Luaè„šæœ¬ å‘½åä¸º Test.lua æ”¾åœ¨ resourcesä¸‹

```
local key = KEYS[1]
    --- è·å–value
    local val = KEYS[2]
    --- è·å–ä¸€ä¸ªå‚æ•°
    local expire = ARGV[1]
    --- å¦‚æœredisæ‰¾ä¸åˆ°è¿™ä¸ªkeyå°±å»æ’å…¥
    if redis.call("get", key) == false then
        --- å¦‚æœæ’å…¥æˆåŠŸï¼Œå°±å»è®¾ç½®è¿‡æœŸå€¼
        if redis.call("set", key, val) then
            --- ç”±äºluaè„šæœ¬æ¥æ”¶åˆ°å‚æ•°éƒ½ä¼šè½¬ä¸ºStringï¼Œæ‰€ä»¥è¦è½¬æˆæ•°å­—ç±»å‹æ‰èƒ½æ¯”è¾ƒ
            if tonumber(expire) > 0 then
                --- è®¾ç½®è¿‡æœŸæ—¶é—´
                redis.call("expire", key, expire)
            end
            return true
        end
        return false
    else
        return false
    end
```
- ç¼–å†™é…ç½®ç±»

```
@Configuration
public class LuaConfiguration {
    @Bean
    public DefaultRedisScript<Boolean> redisScript() {
        DefaultRedisScript<Boolean> redisScript = new DefaultRedisScript<>();
        redisScript.setScriptSource(new ResourceScriptSource(new ClassPathResource("Test.lua")));
        redisScript.setResultType(Boolean.class);
        return redisScript;
    }
}

```
- æµ‹è¯•

```
    @Test
    public void TestLua(){
        System.out.println("æµ‹è¯•Luaå¼€å§‹");
        List<String> keys = Arrays.asList("testLua", "helloå…­è„‰ç¥å‰‘");
        Boolean execute = stringRedisTemplate.execute(redisScript, keys, "10000");
        System.out.println("æµ‹è¯•Luaç»“æŸï¼Œå¹¶åœ¨ä¸‹é¢æ‰“å°ç»“æœ");
        String testLua = stringRedisTemplate.opsForValue().get("testLua");
        System.out.println("ç»“æœæ˜¯:"+testLua);
    }

```

- ç»“æœ

```
æµ‹è¯•Luaå¼€å§‹
2019-12-03 10:48:01.469  INFO 246868 --- [           main] io.lettuce.core.EpollProvider            : Starting without optional epoll library
2019-12-03 10:48:01.471  INFO 246868 --- [           main] io.lettuce.core.KqueueProvider           : Starting without optional kqueue library
æµ‹è¯•Luaç»“æŸï¼Œå¹¶åœ¨ä¸‹é¢æ‰“å°ç»“æœ
ç»“æœæ˜¯:helloå…­è„‰ç¥å‰‘

```
### Redisä½¿ç”¨Luaçš„å¥½å¤„
> 1.å‡å°‘ç½‘ç»œå¼€é”€ï¼šæœ¬æ¥5æ¬¡ç½‘ç»œè¯·æ±‚çš„æ“ä½œï¼Œå¯ä»¥ç”¨ä¸€ä¸ªè¯·æ±‚å®Œæˆï¼ŒåŸå…ˆ5æ¬¡è¯·æ±‚çš„é€»è¾‘æ”¾åœ¨redisæœåŠ¡å™¨ä¸Šå®Œæˆã€‚ä½¿ç”¨è„šæœ¬ï¼Œå‡å°‘äº†ç½‘ç»œå¾€è¿”æ—¶å»¶ã€‚

> 2.åŸå­æ“ä½œï¼šRedisä¼šå°†æ•´ä¸ªè„šæœ¬ä½œä¸ºä¸€ä¸ªæ•´ä½“æ‰§è¡Œï¼Œä¸­é—´ä¸ä¼šè¢«å…¶ä»–å‘½ä»¤æ’å…¥ã€‚

> 3.å¤ç”¨ï¼šå®¢æˆ·ç«¯å‘é€çš„è„šæœ¬ä¼šæ°¸ä¹…å­˜å‚¨åœ¨Redisä¸­ï¼Œæ„å‘³ç€å…¶ä»–å®¢æˆ·ç«¯å¯ä»¥å¤ç”¨è¿™ä¸€è„šæœ¬è€Œä¸éœ€è¦ä½¿ç”¨ä»£ç å®ŒæˆåŒæ ·çš„é€»è¾‘ã€‚
### Redisä½¿ç”¨Luaè¦æ³¨æ„çš„ç‚¹

> 1.Luaè„šæœ¬çš„bugç‰¹åˆ«å¯æ€•ï¼Œç”±äºRedisçš„å•çº¿ç¨‹ç‰¹ç‚¹ï¼Œä¸€æ—¦Luaè„šæœ¬å‡ºç°ä¸ä¼šè¿”å›ï¼ˆä¸æ˜¯è¿”å›å€¼ï¼‰å¾—é—®é¢˜ï¼Œé‚£ä¹ˆè¿™ä¸ªè„šæœ¬å°±ä¼šé˜»å¡æ•´ä¸ªrediså®ä¾‹ã€‚

> 2.Luaè„šæœ¬åº”è¯¥å°½é‡çŸ­å°å®ç°å…³é”®æ­¥éª¤å³å¯ã€‚ï¼ˆåŸå› åŒä¸Šï¼‰

> 3.Luaè„šæœ¬ä¸­ä¸åº”è¯¥å‡ºç°å¸¸é‡Keyï¼Œè¿™æ ·ä¼šå¯¼è‡´æ¯æ¬¡æ‰§è¡Œæ—¶éƒ½ä¼šåœ¨è„šæœ¬å­—å…¸ä¸­æ–°å»ºä¸€ä¸ªæ¡ç›®ï¼Œåº”è¯¥ä½¿ç”¨å…¨å±€å˜é‡æ•°ç»„KEYSå’ŒARGV, KEYSå’ŒARGVçš„ç´¢å¼•éƒ½ä»1å¼€å§‹

> 4.ä¼ é€’ç»™luaè„šæœ¬çš„çš„é”®å’Œå‚æ•°ï¼šä¼ é€’ç»™luaè„šæœ¬çš„é”®åˆ—è¡¨åº”è¯¥åŒ…æ‹¬å¯èƒ½ä¼šè¯»å–æˆ–è€…å†™å…¥çš„æ‰€æœ‰é”®ã€‚ä¼ å…¥å…¨éƒ¨çš„é”®ä½¿å¾—åœ¨ä½¿ç”¨å„ç§åˆ†ç‰‡æˆ–è€…é›†ç¾¤æŠ€æœ¯æ—¶ï¼Œå…¶ä»–è½¯ä»¶å¯ä»¥åœ¨åº”ç”¨å±‚æ£€æŸ¥æ‰€æœ‰çš„æ•°æ®æ˜¯ä¸æ˜¯éƒ½åœ¨åŒä¸€ä¸ªåˆ†ç‰‡é‡Œé¢ã€‚å¦å¤–é›†ç¾¤ç‰ˆredisä¹Ÿä¼šå¯¹å°†è¦è®¿é—®çš„keyè¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœä¸åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨é‡Œé¢ï¼Œé‚£ä¹ˆrediså°†ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚ï¼ˆå†³å®šä½¿ç”¨é›†ç¾¤ç‰ˆä¹‹å‰åº”è¯¥è€ƒè™‘ä¸šåŠ¡æ‹†åˆ†ï¼‰ï¼Œå‚æ•°åˆ—è¡¨æ— æ‰€è°“ã€‚ã€‚

> 5.luaè„šæœ¬è·Ÿå•ä¸ªrediså‘½ä»¤å’Œäº‹åŠ¡æ®µä¸€æ ·éƒ½æ˜¯åŸå­çš„å·²ç»è¿›è¡Œäº†æ•°æ®å†™å…¥çš„luaè„šæœ¬å°†æ— æ³•ä¸­æ–­ï¼Œåªèƒ½ä½¿ç”¨SHUTDOWN NOSAVEæ€æ­»RedisæœåŠ¡å™¨ï¼Œæ‰€ä»¥luaè„šæœ¬ä¸€å®šè¦æµ‹è¯•å¥½ã€‚




## ç»“å°¾
> æˆ‘æ“¦å°±éšä¾¿å†™äº†ä¸ªä¸»ä»å’ŒLuaï¼Œå°±è¿™ä¹ˆå¤šï¼Œå“ï¼Œä¸€æŠŠè¾›é…¸ä¸€æŠŠæ³ªã€‚ä¸‹ä¸€ç« æ˜¯æœ€åä¸€ç« äº†ï¼Œçœ‹çœ‹æ€ä¹ˆå†™å§ã€‚

> å› ä¸ºåšä¸»ä¹Ÿæ˜¯ä¸€ä¸ªå¼€å‘èŒæ–° æˆ‘ä¹Ÿæ˜¯ä¸€è¾¹å­¦ä¸€è¾¹å†™ æˆ‘æœ‰ä¸ªç›®æ ‡å°±æ˜¯ä¸€å‘¨ äºŒåˆ°ä¸‰ç¯‡ å¸Œæœ›èƒ½åšæŒä¸ªä¸€å¹´å§ å¸Œæœ›å„ä½å¤§ä½¬å¤šææ„è§ï¼Œè®©æˆ‘å¤šå­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥ã€‚
## æ—¥å¸¸æ±‚èµ
> å¥½äº†å„ä½ï¼Œä»¥ä¸Šå°±æ˜¯è¿™ç¯‡æ–‡ç« çš„å…¨éƒ¨å†…å®¹äº†ï¼Œèƒ½çœ‹åˆ°è¿™é‡Œçš„äººå‘€ï¼Œéƒ½æ˜¯**äººæ‰**ã€‚

> åˆ›ä½œä¸æ˜“ï¼Œå„ä½çš„æ”¯æŒå’Œè®¤å¯ï¼Œå°±æ˜¯æˆ‘åˆ›ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼Œæˆ‘ä»¬ä¸‹ç¯‡æ–‡ç« è§

>å…­è„‰ç¥å‰‘ | æ–‡ ã€åŸåˆ›ã€‘å¦‚æœæœ¬ç¯‡åšå®¢æœ‰ä»»ä½•é”™è¯¯ï¼Œè¯·æ‰¹è¯„æŒ‡æ•™ï¼Œä¸èƒœæ„Ÿæ¿€ ï¼
